# Generated by Django 5.2.8 on 2025-11-25 05:44

import django.db.models.deletion
from django.conf import settings
from django.db import migrations, models


class Migration(migrations.Migration):
    """
    ã“ã®ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã¯ã€tasksã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®æœ€åˆã®ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚¹ã‚­ãƒ¼ãƒã‚’å®šç¾©ã—ã¾ã™ã€‚
    Categoryãƒ¢ãƒ‡ãƒ«ã¨Taskãƒ¢ãƒ‡ãƒ«ã‚’ä½œæˆã—ã¾ã™ã€‚
    """

    # ã“ã®ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã¯æœ€åˆã®ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã§ã‚ã‚‹ã“ã¨ã‚’ç¤ºã™
    initial = True

    # ã“ã®ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ãŒä¾å­˜ã™ã‚‹ä»–ã®ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã‚’æŒ‡å®š
    dependencies = [
        # ãƒ¦ãƒ¼ã‚¶ãƒ¼èªè¨¼ãƒ¢ãƒ‡ãƒ«ï¼ˆã‚«ã‚¹ã‚¿ãƒ ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ¢ãƒ‡ãƒ«ã®å ´åˆã‚‚è€ƒæ…®ã—ã€settings.AUTH_USER_MODELã‚’ä½¿ç”¨ï¼‰ã«ä¾å­˜
        migrations.swappable_dependency(settings.AUTH_USER_MODEL),
    ]

    # ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã«å¯¾ã—ã¦å®Ÿè¡Œã•ã‚Œã‚‹æ“ä½œã®ãƒªã‚¹ãƒˆ
    operations = [
        # --- Category ãƒ¢ãƒ‡ãƒ«ã®ä½œæˆ ---
        migrations.CreateModel(
            name='Category',
            fields=[
                # ãƒ—ãƒ©ã‚¤ãƒãƒªã‚­ãƒ¼ï¼ˆè‡ªå‹•ã‚¤ãƒ³ã‚¯ãƒªãƒ¡ãƒ³ãƒˆã€éåŒæœŸå¯¾å¿œï¼‰
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                # ã‚«ãƒ†ã‚´ãƒªå
                ('name', models.CharField(max_length=50)),
                # ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¨ã®å¤–éƒ¨ã‚­ãƒ¼ãƒªãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³
                # on_delete=CASCADE: ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒå‰Šé™¤ã•ã‚ŒãŸã‚‰ã€ãã®ã‚«ãƒ†ã‚´ãƒªã‚‚å‰Šé™¤
                ('user', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to=settings.AUTH_USER_MODEL)),
            ],
            # ğŸ“ Note: models.pyã§å®šç¾©ã•ã‚ŒãŸ unique_together ã®åˆ¶ç´„ã¯ã€é€šå¸¸æ¬¡ã®ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã§è¿½åŠ ã•ã‚Œã¾ã™
        ),
        # --- Task ãƒ¢ãƒ‡ãƒ«ã®ä½œæˆ ---
        migrations.CreateModel(
            name='Task',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('title', models.CharField(max_length=200)),
                ('description', models.TextField(blank=True, null=True)),
                ('due_date', models.DateTimeField(blank=True, null=True)),
                # ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã¨é¸æŠè‚¢ (0:æœªç€æ‰‹, 1:é€²è¡Œä¸­, 2:å®Œäº†)
                ('status', models.IntegerField(choices=[(0, 'æœªç€æ‰‹'), (1, 'é€²è¡Œä¸­'), (2, 'å®Œäº†')], default=0)),
                # è«–ç†å‰Šé™¤ãƒ•ãƒ©ã‚°
                ('is_deleted', models.BooleanField(default=False)),
                # å‰Šé™¤æ—¥æ™‚
                ('deleted_at', models.DateTimeField(blank=True, null=True)),
                # ä½œæˆæ—¥æ™‚ (è‡ªå‹•è¨­å®š)
                ('created_at', models.DateTimeField(auto_now_add=True)),
                # æ›´æ–°æ—¥æ™‚ (è‡ªå‹•æ›´æ–°)
                ('updated_at', models.DateTimeField(auto_now=True)),
                # ã‚«ãƒ†ã‚´ãƒªã¨ã®å¤–éƒ¨ã‚­ãƒ¼ãƒªãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³
                # on_delete=SET_NULL: ã‚«ãƒ†ã‚´ãƒªãŒå‰Šé™¤ã•ã‚Œã¦ã‚‚ã‚¿ã‚¹ã‚¯ã¯æ®‹ã‚Šã€categoryãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ãŒNULLã«ãªã‚‹
                ('category', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, to='tasks.category')),
                # ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¨ã®å¤–éƒ¨ã‚­ãƒ¼ãƒªãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³
                # on_delete=CASCADE: ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒå‰Šé™¤ã•ã‚ŒãŸã‚‰ã€ãã®ã‚¿ã‚¹ã‚¯ã‚‚å‰Šé™¤
                ('user', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to=settings.AUTH_USER_MODEL)),
            ],
            # ãƒ¢ãƒ‡ãƒ«ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã®å®šç¾©
            options={
                # ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®ä¸¦ã³é † (due_dateé™é †, created_até™é †)
                'ordering': ['-due_date', '-created_at'],
            },
        ),
    ]